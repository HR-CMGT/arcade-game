!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t||self).arcadeGame={})}(this,function(t){function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,"symbol"==typeof(r=function(t,e){if("object"!=typeof t||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key))?r:String(r),i)}var r}function n(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function i(t){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},i(t)}function r(t,e){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},r(t,e)}function o(t,e,n){return o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct.bind():function(t,e,n){var i=[null];i.push.apply(i,e);var o=new(Function.bind.apply(t,i));return n&&r(o,n.prototype),o},o.apply(null,arguments)}function s(t){var e="function"==typeof Map?new Map:void 0;return s=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return o(t,arguments,i(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),r(n,t)},s(t)}function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var u=0;function d(t){return"__private_"+u+++"_"+t}function l(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var h=document.createElement("template");h.innerHTML="\n<style>\n:host {\n    position:           absolute;\n    top:                10px;\n    right:              10px;\n}\nroot {\n    top:                10px;\n    right:              10px;\n    width:              289px; \n    height:             120px;\n    display:            block;\n    background-color:   #75a8f77a;\n}\nroot * {\n    position:           relative;\n}\n.button-wrapper, .axes-wrapper {\n    display:            flex;\n    flex-wrap:          wrap;\n    float:              left;\n}\nroot .button-div {\n    border: solid 1px black;\n    width:              60px;\n    margin:             5px;\n    padding:            5px;\n}\n.button-wrapper {\n    width:              164px;\n}\n.axes-wrapper {\n    width:              115px;\n    margin:             5px;\n}\n.axes-cell {\n    width:              25px;  \n    height:             25px; \n    margin:             5px;  \n    border:             solid 1px transparent;\n}\n.axes-cell.direction {\n    border:             solid 1px black;\n}\n.axes-cell.center{\n    border:             solid 1px black;\n    background-color:   blue;\n}\n.axes-cell.active{\n    background-color:   red;\n}\n.identifier{\n    position:           absolute;\n    top:                5px;\n    left:               5px;\n    width:              auto;\n    font-weight:        bold;\n    color:              #fff;\n}\n</style>";var p=/*#__PURE__*/d("panelHeight"),f=/*#__PURE__*/d("panelSpacing"),v=/*#__PURE__*/d("joystick"),b=/*#__PURE__*/d("numberOfButtons"),y=/*#__PURE__*/d("buttonDivs"),m=/*#__PURE__*/d("left"),g=/*#__PURE__*/d("right"),w=/*#__PURE__*/d("up"),j=/*#__PURE__*/d("down"),k=/*#__PURE__*/d("rootElement"),O=/*#__PURE__*/d("createListenersForButtons"),x=/*#__PURE__*/d("handleButtonClicks"),P=/*#__PURE__*/d("createHTMLForButtons"),E=/*#__PURE__*/d("createHTMLForAxes"),N=/*#__PURE__*/function(t){var e,n;function i(e,n){var i;i=t.call(this)||this,Object.defineProperty(a(i),E,{value:T}),Object.defineProperty(a(i),P,{value:A}),Object.defineProperty(a(i),x,{value:J}),Object.defineProperty(a(i),O,{value:L}),Object.defineProperty(a(i),p,{writable:!0,value:120}),Object.defineProperty(a(i),f,{writable:!0,value:10}),Object.defineProperty(a(i),v,{writable:!0,value:void 0}),Object.defineProperty(a(i),b,{writable:!0,value:void 0}),Object.defineProperty(a(i),y,{writable:!0,value:[]}),Object.defineProperty(a(i),m,{writable:!0,value:void 0}),Object.defineProperty(a(i),g,{writable:!0,value:void 0}),Object.defineProperty(a(i),w,{writable:!0,value:void 0}),Object.defineProperty(a(i),j,{writable:!0,value:void 0}),Object.defineProperty(a(i),k,{writable:!0,value:void 0}),i.Axes=[],l(a(i),v)[v]=e,l(a(i),b)[b]=n;var r=l(a(i),f)[f]+l(a(i),v)[v].JoystickNumber*(l(a(i),p)[p]+l(a(i),f)[f]);i.style.top=r+"px",l(a(i),k)[k]=document.createElement("root"),l(a(i),k)[k].style.height=l(a(i),p)[p]+"px",h.appendChild(l(a(i),k)[k]);var o=document.createElement("div");if(o.classList.add("identifier"),o.innerHTML="#"+l(a(i),v)[v].JoystickNumber,l(a(i),k)[k].appendChild(o),l(a(i),E)[E](),l(a(i),P)[P](),l(a(i),O)[O](),i.attachShadow({mode:"open"}),i.shadowRoot){var s=h.content.cloneNode(!0);s.appendChild(l(a(i),k)[k]),i.shadowRoot.appendChild(s)}return document.body.appendChild(a(i)),i}return n=t,(e=i).prototype=Object.create(n.prototype),e.prototype.constructor=e,r(e,n),i.prototype.update=function(){0==this.Axes[0]?(l(this,m)[m].classList.remove("active"),l(this,g)[g].classList.remove("active")):this.Axes[0]<0?l(this,m)[m].classList.add("active"):this.Axes[0]>0&&l(this,g)[g].classList.add("active"),0==this.Axes[1]?(l(this,w)[w].classList.remove("active"),l(this,j)[j].classList.remove("active")):this.Axes[1]<0?l(this,w)[w].classList.add("active"):this.Axes[1]>0&&l(this,j)[j].classList.add("active")},i}(/*#__PURE__*/s(HTMLElement));function L(){for(var t=this,e=function(e){document.addEventListener(l(t,v)[v].ButtonEvents[e],function(n){return l(t,x)[x](n,e)})},n=0;n<l(this,b)[b];n++)e(n)}function J(t,e){l(this,y)[y][e].style.filter="hue-rotate("+360*Math.random()+"deg)"}function A(){var t=document.createElement("div");t.className="button-wrapper";for(var e=0;e<l(this,b)[b];e++){var n=document.createElement("div");n.className="button-div",t.appendChild(n),n.style.backgroundColor="blue",n.innerHTML="Button "+(e+1),l(this,y)[y].push(n)}l(this,k)[k].appendChild(t)}function T(){var t=document.createElement("div");t.className="axes-wrapper";for(var e=1;e<=9;e++){var n=document.createElement("div");switch(n.className="axes-cell",e%2==0&&n.classList.add("direction"),5==e&&n.classList.add("center"),t.appendChild(n),e){case 2:l(this,w)[w]=n;break;case 4:l(this,m)[m]=n;break;case 6:l(this,g)[g]=n;break;case 8:l(this,j)[j]=n}}l(this,k)[k].appendChild(t)}window.customElements.define("debug-panel",N);var B=/*#__PURE__*/d("DEBUG"),G=/*#__PURE__*/d("BUT1"),C=/*#__PURE__*/d("BUT2"),M=/*#__PURE__*/d("joystickNumber"),R=/*#__PURE__*/d("numberOfBUttons"),S=/*#__PURE__*/d("buttonEvents"),_=/*#__PURE__*/d("axes"),U=/*#__PURE__*/d("gamepad"),D=/*#__PURE__*/d("previousGamepad"),H=/*#__PURE__*/d("previousJoystickDirection"),F=/*#__PURE__*/d("readGamepad"),I=/*#__PURE__*/d("buttonPressed"),X=/*#__PURE__*/function(){function t(t,e,n){Object.defineProperty(this,I,{value:$}),Object.defineProperty(this,F,{value:Y}),Object.defineProperty(this,B,{writable:!0,value:!0}),Object.defineProperty(this,G,{writable:!0,value:8}),Object.defineProperty(this,C,{writable:!0,value:9}),Object.defineProperty(this,M,{writable:!0,value:0}),Object.defineProperty(this,R,{writable:!0,value:0}),Object.defineProperty(this,S,{writable:!0,value:[]}),Object.defineProperty(this,_,{writable:!0,value:[]}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),l(this,M)[M]=t,l(this,R)[R]=e,l(this,B)[B]=n;for(var i=0;i<l(this,R)[R];i++)l(this,S)[S].push("joystick"+this.JoystickNumber+"button"+i);l(this,S)[S].push("joystick"+this.JoystickNumber+"neutral"),l(this,S)[S].push("joystick"+this.JoystickNumber+"left"),l(this,S)[S].push("joystick"+this.JoystickNumber+"right"),l(this,S)[S].push("joystick"+this.JoystickNumber+"up"),l(this,S)[S].push("joystick"+this.JoystickNumber+"down"),l(this,H)[H]="neutral",l(this,B)[B]&&(this.debugPanel=new N(this,l(this,R)[R]))}var e=t.prototype;return e.update=function(){if(void 0!==l(this,U)[U]&&void 0!==l(this,U)[U].index&&void 0!==navigator.getGamepads()[l(this,U)[U].index]){var t=navigator.getGamepads()[l(this,U)[U].index];t&&l(this,F)[F](t)}},e.destroy=function(){l(this,B)[B]&&this.debugPanel.remove()},n(t,[{key:"Left",get:function(){return-1==l(this,_)[_][0]}},{key:"Right",get:function(){return 1==l(this,_)[_][0]}},{key:"Up",get:function(){return-1==l(this,_)[_][1]}},{key:"Down",get:function(){return 1==l(this,_)[_][1]}},{key:"Neutral",get:function(){return 0==l(this,_)[_][0]&&0==l(this,_)[_][1]}},{key:"Y",get:function(){return Math.round(l(this,_)[_][1])}},{key:"X",get:function(){return Math.round(l(this,_)[_][0])}},{key:"JoystickNumber",get:function(){return l(this,M)[M]}},{key:"ButtonEvents",get:function(){return l(this,S)[S]}},{key:"Gamepad",get:function(){return l(this,U)[U]},set:function(t){l(this,U)[U]=t}},{key:"PreviousGamepad",get:function(){return l(this,D)[D]},set:function(t){l(this,D)[D]=t}}]),t}();function Y(t){for(var e=0;e<l(this,R)[R];e++)l(this,I)[I](t.buttons[e])&&!l(this,I)[I](l(this,D)[D].buttons[e])&&document.dispatchEvent(new Event(l(this,S)[S][e])),!l(this,I)[I](t.buttons[l(this,G)[G]])||!l(this,I)[I](t.buttons[l(this,C)[C]])||l(this,I)[I](l(this,D)[D].buttons[l(this,G)[G]])&&l(this,I)[I](l(this,D)[D].buttons[l(this,C)[C]])||document.dispatchEvent(new Event("redirect"));l(this,_)[_][0]=Math.round(t.axes[0]),l(this,_)[_][1]=Math.round(t.axes[1]),l(this,B)[B]&&(this.debugPanel.Axes[0]=l(this,_)[_][0],this.debugPanel.Axes[1]=l(this,_)[_][1],this.debugPanel.update()),this.Left&&"left"!==l(this,H)[H]&&(l(this,H)[H]="left",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"left"))),this.Right&&"right"!==l(this,H)[H]&&(l(this,H)[H]="right",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"right"))),this.Up&&"up"!==l(this,H)[H]&&(l(this,H)[H]="up",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"up"))),this.Down&&"down"!==l(this,H)[H]&&(l(this,H)[H]="down",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"down"))),this.Neutral&&"neutral"!==l(this,H)[H]&&(l(this,H)[H]="neutral",document.dispatchEvent(new Event("joystick"+this.JoystickNumber+"neutral"))),l(this,D)[D]=t}function $(t){return"object"==typeof t?t.pressed:1==t}var q=/*#__PURE__*/d("DEBUG"),z=/*#__PURE__*/d("joysticks"),K=/*#__PURE__*/d("REDIRECT_URL"),Q=/*#__PURE__*/d("multiplayer"),V=/*#__PURE__*/d("game"),W=/*#__PURE__*/d("onRedirect"),Z=/*#__PURE__*/d("onGamePadConnected"),tt=/*#__PURE__*/d("onGamePadDisconnected"),et=/*#__PURE__*/d("showStatus"),nt=/*#__PURE__*/d("removeStatus");function it(){l(this,q)[q]&&console.log("redirect!!"),window.location.href=l(this,K)[K]}function rt(t){if(l(this,q)[q]&&(console.log("Game pad connected"),console.log("Joystick number: "+t.gamepad.index)),!l(this,Q)[Q]&&0==l(this,z)[z].length||l(this,Q)[Q]){var e=this.createAndAddJoystick(t.gamepad.index,6);e.PreviousGamepad=e.Gamepad,e.Gamepad=t.gamepad,null==e.PreviousGamepad&&(e.PreviousGamepad=t.gamepad)}l(this,q)[q]&&l(this,nt)[nt]()}function ot(t){l(this,q)[q]&&console.log("Game pad disconnected"),l(this,q)[q]&&l(this,et)[et]("Gamepad is NOT connected. Connect the gamepad and press a button."),this.removeJoystick(t.gamepad.index),l(this,V)[V].disconnect()}function st(t){var e,n;(e=document.getElementsByTagName("status")[0])||(e=document.createElement("status"),document.body.append(e)),e&&((n=e.getElementsByTagName("p")[0])||(n=document.createElement("p"),e.appendChild(n))),n&&(n.innerHTML=t)}function at(){var t;(t=document.getElementsByTagName("status")[0])&&t.remove()}t.Arcade=/*#__PURE__*/function(){function t(t,e,n){var i=this;void 0===e&&(e=!1),void 0===n&&(n=!1),Object.defineProperty(this,nt,{value:at}),Object.defineProperty(this,et,{value:st}),Object.defineProperty(this,tt,{value:ot}),Object.defineProperty(this,Z,{value:rt}),Object.defineProperty(this,W,{value:it}),Object.defineProperty(this,q,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:"http://hr-cmgt.github.io/arcade-server"}),Object.defineProperty(this,Q,{writable:!0,value:!1}),Object.defineProperty(this,V,{writable:!0,value:void 0}),l(this,V)[V]=t,l(this,Q)[Q]=e,l(this,q)[q]=n,l(this,z)[z]=[],l(this,q)[q]&&l(this,et)[et]("Gamepad is NOT connected. Press a button to connect"),document.addEventListener("redirect",function(){return l(i,W)[W]()}),window.addEventListener("gamepadconnected",function(t){return l(i,Z)[Z](t)}),window.addEventListener("gamepaddisconnected",function(t){return l(i,tt)[tt](t)})}var e=t.prototype;return e.createAndAddJoystick=function(t,e){var n=this.getJoystickByNumber(t);if(null!=n)return n;var i=new X(t,e,l(this,q)[q]);return l(this,z)[z][t]=i,i&&(document.dispatchEvent(new CustomEvent("joystickcreated",{detail:t})),console.log("joystick created")),i},e.removeJoystick=function(t){var e=this.getJoystickByNumber(t);if(null!=e){var n=l(this,z)[z].indexOf(e);"function"==typeof l(this,z)[z][n].destroy&&l(this,z)[z][n].destroy(),n>-1&&l(this,z)[z].splice(n,1)}},e.getJoystickByNumber=function(t){for(var e,n=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return c(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(t,e):void 0}}(t))){n&&(t=n);var i=0;return function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(l(this,z)[z]);!(e=n()).done;){var i=e.value;if(i.JoystickNumber==t)return i}return null},n(t,[{key:"Joysticks",get:function(){return l(this,z)[z]}}]),t}()});
//# sourceMappingURL=arcade.umd.js.map
